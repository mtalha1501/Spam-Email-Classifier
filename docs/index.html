<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ArchMail Shield — Spam Classifier</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
    <header class="hero">
        <nav class="navbar navbar-dark">
            <div class="container">
                <span class="navbar-brand">ArchMail Shield</span>
                <span class="badge bg-light text-dark badge-pill">Spam Detection Suite</span>
            </div>
        </nav>
        <div class="container position-relative">
            <div class="row align-items-center">
                <div class="col-lg-7">
                    <h1 class="mb-3">Spot spam in seconds with ML-inspired heuristics.</h1>
                    <p class="lead mb-4">Paste any email content and instantly learn whether it should be trusted. Runs entirely in your browser when no backend is configured.</p>
                    <div class="d-flex flex-wrap gap-3">
                        <span class="badge bg-light text-dark badge-pill">Offline-ready</span>
                        <span class="badge bg-light text-dark badge-pill">Confidence scoring</span>
                        <span class="badge bg-light text-dark badge-pill">Secure & private*</span>
                    </div>
                </div>
                <div class="col-lg-5 text-lg-end mt-4 mt-lg-0">
                    <div class="text-white-50 small">*Your text never leaves this page unless you configure a remote API endpoint.</div>
                </div>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="row g-4 align-items-start mt-n5">
                <div class="col-lg-7">
                    <div class="card card-shadow p-4 p-lg-5 fade-in">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <div>
                                <h2 class="h4 mb-0">Analyse an email</h2>
                                <div class="text-muted small" id="threshold-hint">Flags spam when confidence ≥ 70%</div>
                            </div>
                            <span class="text-muted small" id="status-label">Ready</span>
                        </div>
                        <form id="spam-form" class="needs-validation" novalidate>
                            <div class="mb-3">
                                <label for="email-text" class="form-label">Paste the email content below<span class="text-danger">*</span></label>
                                <textarea class="form-control" id="email-text" placeholder="Dear team..." required></textarea>
                                <div class="invalid-feedback">Please paste the email you want to analyse.</div>
                            </div>
                            <div class="d-grid d-sm-flex gap-3">
                                <button type="submit" class="btn btn-primary btn-lg px-4" id="submit-btn">
                                    <span class="spinner-border spinner-border-sm me-2 d-none" id="loading-spinner" role="status" aria-hidden="true"></span>
                                    Analyse now
                                </button>
                                <button type="button" class="btn btn-outline-secondary" id="clear-btn">Clear</button>
                            </div>
                        </form>
                        <div id="result" class="result mt-4" role="status" aria-live="polite"></div>
                    </div>
                </div>
                <div class="col-lg-5">
                    <div class="card card-shadow h-100 p-4 p-lg-5 fade-in">
                        <h3 class="h5">How the browser mode works</h3>
                        <p class="text-muted">When no backend is configured, the page applies keyword-driven heuristics calibrated from the original model to estimate the probability an email is spam.</p>
                        <ul class="list-unstyled mb-4">
                            <li class="mb-3"><span class="fw-semibold">Spam indicators:</span> classic trigger words ("free", "urgent", "verify") yield higher scores.</li>
                            <li class="mb-3"><span class="fw-semibold">Ham indicators:</span> business-friendly language ("meeting", "report", "thanks") reduces false positives.</li>
                            <li class="mb-3"><span class="fw-semibold">Threshold:</span> adjustable via <code>APP_CONFIG.spamThreshold</code> (default 0.70).</li>
                        </ul>
                        <div class="alert alert-info mb-0" role="alert">
                            Deploying the Flask backend restores the full Random Forest pipeline and probability calibration logic.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="row gy-3 align-items-center">
                <div class="col-md-6 text-md-start text-center">
                    <strong>ArchMail Shield</strong> &mdash; safeguarding inboxes with Machine Learning.
                </div>
                <div class="col-md-6 text-md-end text-center">
                    <span class="small">Project source on <a href="https://github.com/mtalha1501/Spam-Email-Classifier">GitHub</a> • Contact: <a href="mailto:mtalha1501@gmail.com">mtalha1501@gmail.com</a></span>
                </div>
            </div>
        </div>
    </footer>

    <script src="assets/js/config.js"></script>
    <script>
        (function applyQueryConfig() {
            try {
                const params = new URLSearchParams(window.location.search);
                const apiParam = params.get('api');
                const thresholdParam = params.get('threshold');
                if (apiParam) {
                    window.APP_CONFIG.apiBaseUrl = decodeURIComponent(apiParam);
                }
                if (thresholdParam && !Number.isNaN(Number(thresholdParam))) {
                    window.APP_CONFIG.spamThreshold = Number(thresholdParam);
                }
            } catch (err) {
                console.warn('Unable to parse URL configuration parameters.', err);
            }
        })();
    </script>
    <script src="assets/js/app.js"></script>
</body>
</html>
